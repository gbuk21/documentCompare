<!DOCTYPE html>
<html lang="en">
<title>Document compare</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Poppins", sans-serif}
body {font-size:16px;}
.w3-half img{margin-bottom:-6px;margin-top:16px;opacity:0.8;cursor:pointer}
.w3-half img:hover{opacity:1}
.pagination-page-info {
    padding: .6em;
    padding-left: 0;
    width: 40em;
    margin: .5em;
    margin-left: 0;
    font-size: 12px;
}
.pagination-page-info b {
    color: black;
    background: #6aa6ed;
    padding-left: 2px;
    padding: .1em .25em;
    font-size: 150%;
}
</style>
<body>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-red w3-collapse w3-top w3-large w3-padding" style="z-index:3;width:300px;font-weight:bold;" id="mySidebar"><br>
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft" style="width:100%;font-size:22px">Close Menu</a>
  <div class="w3-container">
    <h3 class="w3-padding-10"><a href="/index/" <b>Document compare</b></a></h3>
  </div>
  <div class="w3-container">
    <h4 class="w3-padding-30"><b>Welcome<br>{{name}}</b></h4>
  </div>
</nav>

<!-- Top menu on small screens -->
<header class="w3-container w3-top w3-hide-large w3-red w3-xlarge w3-padding">
  <a href="javascript:void(0)" class="w3-button w3-red w3-margin-right" onclick="w3_open()">?</a>
  <span>Math</span>
</header>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:340px;margin-right:40px">

  <!-- Header -->
  <div class="w3-container" style="margin-top:10px" id="showcase">
    <h4 class="w3-large"><b>Document comparison</h4>
  </div>


  <!-- Contact -->

  <div class="w3-container" id="contact" style="margin-top:5px">

    <hr style="width:50px;border:5px solid red" class="w3-round">
<form  action="{{ url_for('show_compare',document_name=document_name) }}" method="post">

   <div>
<input type="checkbox" id="showonlydifferences" name="showonlydifferences">
<label for="showonlydifferences"> Show Only Differences</label>
<input type="checkbox" id="showonlyapproved" name="showonlyapproved" >
<label for="showonlyapproved"> Show Only Approved</label><br>
       <label for="Line1">LineNumber</label><br>
       <textarea name="Line1" id="Line1"  rows="1" cols="5" wrap="soft"> </textarea> 
       <textarea name="old1" id="old1"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new1" id="new1"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ1" name="differ1">
<label for="differ1"> differs?</label>
<input type="checkbox" id="approve1" name="approve1" >
<label for="approve1"> approved?</label><br>
       <textarea name="Line2" id="Line2"  rows="1" cols="5" wrap="soft"> </textarea> 
       <textarea name="old2" id="old2"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new2" id="new2"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ2" name="differ2">
<input type="checkbox" id="approve2" name="approve2" ><br>
       <textarea name="Line3" id="Line3"  rows="1" cols="5" wrap="soft"> </textarea> 
       <textarea name="old3" id="old3"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new3" id="new3"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ3" name="differ3">
<input type="checkbox" id="approve3" name="approve3" ><br>
       <textarea name="Line4" id="Line4"  rows="1" cols="5" wrap="soft"> </textarea> 
       <textarea name="old4" id="old4"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new4" id="new4"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ4" name="differ4">
<input type="checkbox" id="approve4" name="approve4" ><br>
       <textarea name="Line5" id="Line5"  rows="1" cols="5" wrap="soft"> </textarea> 
       <textarea name="old5" id="old5"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new5" id="new5"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ5" name="differ5">
<input type="checkbox" id="approve5" name="approve5" ><br>
       <textarea name="Line6" id="Line6"  rows="1" cols="5" wrap="soft"> </textarea> 

       <textarea name="old6" id="old6"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new6" id="new6"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ6" name="differ6">
<input type="checkbox" id="approve6" name="approve6" ><br>
       <textarea name="Line7" id="Line7"  rows="1" cols="5" wrap="soft"> </textarea> 

       <textarea name="old7" id="old7"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new7" id="new7"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ7" name="differ7">
<input type="checkbox" id="approve7" name="approve7" ><br>
       <textarea name="Line8" id="Line8"  rows="1" cols="5" wrap="soft"> </textarea> 

       <textarea name="old8" id="old8"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new8" id="new8"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ8" name="differ8">
<input type="checkbox" id="approve8" name="approve8" ><br>
       <textarea name="Line9" id="Line9"  rows="1" cols="5" wrap="soft"> </textarea> 

       <textarea name="old9" id="old9"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new9" id="new9"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ9" name="differ9">
<input type="checkbox" id="approve9" name="approve9" ><br>
       <textarea name="Line10" id="Line10"  rows="1" cols="5" wrap="soft"> </textarea> 

       <textarea name="old10" id="old10"  rows="2" cols="30" wrap="soft"> </textarea> 
       <textarea name="new10" id="new10"  rows="2" cols="30" wrap="soft"> </textarea> 
<input type="checkbox" id="differ10" name="differ10">
<input type="checkbox" id="approve10" name="approve10" ><br>

       <input type="submit" value="save" name='save'class="w3-button  w3-padding-small w3-red w3-margin-bottom" >
       <input type="submit" value="back" name="back" class="w3-button w3-padding-small w3-red w3-margin-bottom">
   </div>
</form>

</div>

   <script type="text/javascript">
   var document_name={{document_name|tojson}};
   var doc_dff={{doc_dff|tojson}};
   var CurrentVersion={{CurrentVersion|tojson}};
   var previousversion={{previousversion|tojson}};

   var differencescheckBox = document.getElementById('showonlydifferences');

   var approvedcheckBox = document.getElementById('showonlyapproved');
   var approvedcheckstatus =false;
   var diffcheckstatus =false; 

   function show_form(approvedcheckstatus,diffcheckstatus) {
   var idx=1;
   var chk_idx=1;
   for (i=1; i<11;i++) {
           document.getElementById('Line'+i).value='';

           document.getElementById('new'+i).value='';
           document.getElementById('differ'+i).checked=false;
           document.getElementById('old'+i).value='';
           document.getElementById('approve'+i).checked=false;
  }
       for (letter in doc_dff) {  
           if ((diffcheckstatus==true && !doc_dff[letter]['differs'] ) || (approvedcheckstatus==true && !doc_dff[letter]['approved'] )) {
           continue }
           else {
           document.getElementById('Line'+idx).value=doc_dff[letter]['LineNumber'];

           document.getElementById('new'+idx).value=doc_dff[letter]['NewSentence'];
           if (doc_dff[letter]['differs']=="Y")  {
              document.getElementById('differ'+idx).checked=true;}
           else {
              document.getElementById('differ'+idx).checked=false;}         
           document.getElementById('old'+idx).value=doc_dff[letter]['OldSentence'];
           if (doc_dff[letter]['approved']=="Y") {
              document.getElementById('approve'+idx).checked=true;
           } else {
              document.getElementById('approve'+idx).checked=false;
           }   }            idx=idx+1;   }

   for (j=idx; j<11;j++) {
           document.getElementById('Line'+j).visible=false;

           document.getElementById('new'+j).visible=false;
           document.getElementById('differ'+j).visible=false
           document.getElementById('old'+j).visible=false
           document.getElementById('approve'+j).visible=false
  };


   };

   differencescheckBox.addEventListener('change', function(e){
            approvedcheckstatus = document.getElementById('showonlyapproved').checked;
            diffcheckstatus = document.getElementById('showonlydifferences').checked;
   show_form(approvedcheckstatus,diffcheckstatus);
   });
   approvedcheckBox.addEventListener('change', function(e){
            approvedcheckstatus = document.getElementById('showonlyapproved').checked;
            diffcheckstatus = document.getElementById('showonlydifferences').checked;
   show_form(approvedcheckstatus,diffcheckstatus);
   });

   show_form(approvedcheckstatus,diffcheckstatus);

function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
  if (window.speechSynthesis.speaking) {
             window.speechSynthesis.cancel();
  };
}

  </script>

  {{ pagination.info }}
  {{ pagination.links }}

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>

</body>
</html>
